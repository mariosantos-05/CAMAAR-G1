<header class="top-navbar">
    <div style="display: flex; align-items: center; gap: 15px;">
        <span id="sidebar-toggle" style="cursor: pointer; font-size: 1.6rem;">☰</span>
        <h2 style="font-size: 1.2rem; margin: 0; color: #333;">Avaliações</h2>
    </div>

    <div class="nav-search">
        <input type="text" class="search-input" placeholder="Pesquisar...">
        <div class="profile-circle">
            <%= current_user.nome.first.upcase %>
        </div>
    </div>
</header>

<div class="admin-container">
    <aside class="sidebar" id="sidebar">
        <nav class="sidebar-menu">
            <a href="<%= avaliacoes_path %>" class="active">Avaliações</a>

            <% if current_user.profile == "Admin" %>
            <a href="<%= admin_management_path %>">Gerenciamento</a>
            <% end %>
        </nav>
    </aside>

    <main class="main-content">
        <div class="content-area" style="flex-direction: column; align-items: flex-start; padding: 40px; overflow-y: auto;">

            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; width: 100%;">

                <% @turmas.each do |turma| %>
                <div style="background: white; padding: 20px; border-radius: 8px; border-left: 5px solid #6a1b57; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">

                    <h4 style="margin-top: 0; color: #333;"><%= turma.nome %></h4>

                    <p style="color: #666; font-size: 0.9rem;">
                        Formulários disponíveis: <strong><%= turma.forms.size %></strong>
                    </p>

                    <% turma.forms.each do |form| %>
                    <% unless Resposta.exists?(form_id: form.id, usuario_id: current_user.id) %>
                    <%= link_to responder_form_path(turma.id, form.id),
        class: "btn-action btn-primary-green",
        style: "margin-top: 8px; display: inline-block; padding: 8px 15px; font-size: 0.9rem;" do %>
                    Responder: <%= form.titulo %>
                    <% end %>
                    <% else %>
                    <span style="display: inline-block; margin-top: 8px; padding: 8px 15px;
                 background: #ddd; color: #666; border-radius: 6px; font-size: 0.9rem;">
                        Já respondido
                    </span>
                    <% end %>
                    <% end %>


                </div>
                <% end %>

            </div>
        </div>
    </main>
</div>