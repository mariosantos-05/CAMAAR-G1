<header class="top-navbar">
    <div style="display: flex; align-items: center; gap: 15px;">
        <span id="sidebar-toggle" style="cursor: pointer; font-size: 1.6rem;">☰</span>
        <h2 class="navbar-title">
            Avaliação - <%= @form.turma.nome %> - <%= @form.turma.semestre %>
        </h2>
    </div>

    <div class="profile-circle">
        <%= current_user.nome.first.upcase %>
    </div>
</header>

<div class="main-container">
    <div class="form-envelope">

        <% @form.template.questions.each_with_index do |q, index| %>
        <div class="question-card">
            <p class="question-text">
                Pergunta <%= index + 1 %>: <%= q.text %>
            </p>

            <% if q.question_type == "text" %>
            <input type="text" name="answers[<%= q.id %>]" placeholder="Digite sua resposta" class="text-input">

            <% elsif q.question_type == "radio" %>
            <% q.options.each do |opt| %>
            <div class="radio-option">
                <label>
                    <input type="radio" name="answers[<%= q.id %>]" value="<%= opt %>">
                    <%= opt %>
                </label>
            </div>
            <% end %>
            <% end %>
        </div>
        <% end %>


        <% questions.each_with_index do |q, index| %>
        <div class="question-card">
            <p class="question-text">
                Pergunta <%= index + 1 %>: <%= q[:text] %>
            </p>

            <% if q[:type] == "text" %>
            <input type="text" placeholder="Digite sua resposta" class="text-input">

            <% elsif q[:type] == "radio" %>
            <% q[:options].each do |opt| %>
            <div class="radio-option">
                <label>
                    <input type="radio" name="question_<%= index %>" value="<%= opt %>">
                    <%= opt %>
                </label>
            </div>
            <% end %>
            <% end %>
        </div>
        <% end %>

        <%= button_to enviar_resposta_avaliacao_path(@form.id),
          method: :post,
          form: { "data-turbo" => false },
          class: "submit-button" do %>
        ➤
        <% end %>

    </div>
</div>